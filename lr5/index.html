<!DOCTYPE html>

<html lang="ru" > 
<head>
	<meta charset="utf-8" />
	<title>LR№5_Sgibnev_4743</title>
	<link rel="stylesheet" href="https://www.x3dom.org/download/dev/x3dom.css" />
   	<script src="https://www.x3dom.org/download/dev/x3dom-full.js"></script>
	<script src="sp.js"></script>
</head>

<body style="width:94%; margin:auto;">
	<button id="stop"> Остановить </button>
	<button id="play"> Воспроизвести </button>
	<h><input type="range" id="r1" oninput="fun1()" min="1" max="3" step="0.1"></h>
	<h>Размер плота: <output type="text" id="i1">1</output>x</h>
	<X3D>
		<scene>
			<Background skyAngle='2' skyColor='0.6 0.4 0.3 1 1 1'></Background>
			<Viewpoint position='-12 2.8 10' orientation='0 -1 0 0.8' fieldOfView='1.4'></Viewpoint>
			<Viewpoint position='12 2.8 10' orientation='0 1 0 0.8' fieldOfView='1.4'></Viewpoint>
			<Viewpoint position='12 2.8 -10' orientation='0 1 0 2.2' fieldOfView='1.4'></Viewpoint>
			<Viewpoint position='-12 2.8 -10' orientation='0 -1 0 2.2' fieldOfView='1.4'></Viewpoint>
			<NavigationInfo></NavigationInfo>
			<Fog color='1 1 1' fogType='EXPONENTIAL' visibilityRange='85'></Fog>
			<PointLight on='TRUE' intensity='0.01' color='246 71 71' global='FALSE' location='15 10 20' radius='100' shadowIntensity='0.3'> </PointLight>
			<Transform id="plot" DEF="plot" scale="1 1 1" translation="1 1.4 0" rotation='1 0 0 0.18'>
				<Shape>
					<IndexedFaceSet solid="false" coordIndex="0 1 3 2 -1 0 4 5 1 -1 4 5 7 6 -1 2 3 7 6 -1 0 2 6 4 -1 1 3 7 5 -1
							8 9 13 12 -1 10 14 15 11 -1 8 12 14 10 -1 9 13 15 11 -1 8 9 11 10 -1 14 15 13 12 -1
							16 17 21 20 -1 18 19 23 22 -1 18 19 17 16 -1 22 23 21 20 -1 16 20 22 18 -1 17 21 23 19 -1
							24 25 29 28 -1 26 30 31 27 -1 24 25 27 26 -1 28 29 31 30 -1 28 24 26 30 -1 25 29 31 27 -1
							32 33 37 36 -1 34 35 39 38 -1 32 33 35 34 -1 36 37 39 38 -1 34 38 36 32 -1 35 33 37 39">
						<Coordinate point="-3 0 -3, -2.5 0 -3, -3 0 2.8, -2.5 0 2.8, -3 0.5 -3, -2.5 0.5 -3, -3 0.5 2.8, -2.5 0.5 2.8,
								-2.4 0 -2.8, -1.9 0 -2.8, -2.4 0 3, -1.9 0 3, -2.4 0.5 -2.8, -1.9 0.5 -2.8, -2.4 0.5 3, -1.9 0.5 3,
								-1.8 0 -3, -1.3 0 -3, -1.8 0 2.8, -1.3 0 2.8, -1.8 0.5 -3, -1.3 0.5 -3, -1.8 0.5 2.8, -1.3 0.5 2.8,
								-1.2 0 -2.8, -0.7 0 -2.8, -1.2 0 3, -0.7 0 3, -1.2 0.5 -2.8, -0.7 0.5 -2.8, -1.2 0.5 3, -0.7 0.5 3,
								-0.6 0 -3, -0.1 0 -3, -0.6 0 2.8, -0.1 0 2.8, -0.6 0.5 -3, -0.1 0.5 -3, -0.6 0.5 2.8, -0.1 0.5 2.8">
						</Coordinate>
					</IndexedFaceSet>
					<Appearance>
						<ImageTexture url='321.jpg'></ImageTexture>
						<TextureTransform scale="1 10"></TextureTransform>
						<Material shininess='1'></Material>
					</Appearance>
				</Shape>
				<Transform translation='-1.55 2 2.5'>
					<Shape DEF="krep">
						<appearance>
							<ImageTexture url='321.jpg'></ImageTexture>
							<Material shininess='1'></Material>
						</appearance>
						<cylinder height="3.2" radius="0.08"></cylinder>
					</Shape>
				</Transform>
				<Transform translation='-1.55 3.2 2.5' rotation='0 0 1 1.57'>
					<Shape USE="krep"></Shape>
				</Transform>
				<Transform translation='-1.55 0.25 2.5' rotation='0 0 1 1.57'>
					<Shape USE="krep"></Shape>
				</Transform>
				<Transform translation='-1.55 0.25 1' rotation='0 0 1 1.57'>
					<Shape USE="krep"></Shape>
				</Transform>
				<Transform translation='-1.55 0.25 -1' rotation='0 0 1 1.57'>
					<Shape USE="krep"></Shape>
				</Transform>
				<Transform translation='-1.55 0.25 -2.5' rotation='0 0 1 1.57'>
					<Shape USE="krep"></Shape>
				</Transform>
				<Transform translation="-2.8 3.4 2.45" rotation='1 0 0 1.57'>
					<Anchor url="https://vk.com/rankoroff" parameter="target='_self'">
						<Shape>
							<ElevationGrid DEF="parus" xDimension="6" zDimension="6" 
							height="-0.3, 0.13, 0.15, 0.15, 0.13, -0.3,
									0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
									0.4, 0.4, 0.4, 0.4, 0.4, 0.4,
									0.35, 0.35, 0.35, 0.35, 0.35, 0.35,
									0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
									0.3, 0.1, -0.1, -0.1, 0.1, 0.3" xSpacing="0.5" zSpacing="0.55" solid="false">
							</ElevationGrid>
							<Appearance sorttype="auto" alphaclipthreshold="0.1">
								<ImageTexture url='231.jpg'></ImageTexture>
								<TextureTransform scale="1 1">
								</texturetransform>
								<Material shininess='1'></Material>
							</Appearance>
						</Shape>
					</Anchor>
				</Transform>
				<Transform translation="0 0 -0.1" rotation='0 0 0 0'>
				
					<Shape>
						<IndexedLineSet coordIndex="0 1 2 -1 1 3 -1 3 4 -1 3 5 -1 3 6 -1 6 8 9 7 6">
							<Coordinate point='-1.7 0 2.5, -1.3 1.3 2, -1.7 0 1.5, -1.34 2.2 2, -1.56 2.8 2.6, -1.4 1.8 1.2, -1.34 2.4 2, -1.34 2.6 2.2, -1.34 2.6 1.8, -1.34 2.8 2'>
							</Coordinate>
							<Color DEF="col" color="0.541 1 1,1 0.5 1, 0.5 0 0, 0 1 0.5, 0.5 1 1, 0.4 1 0, 0.1 0.5 0.4, 0.9 0.11 0.51"></Color>
						</IndexedLineSet>
					</Shape>

				</Transform>
			</Transform>
			<Transform translation="-22.5 0 -22.5" rotation='0 0 0 0'>
				<Shape>
					<ElevationGrid id="voln" DEF="voln" xDimension="10" zDimension="10"
					height="2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 
							2, 2, 1, 1, 1, 1, 2, 1, 2, 1, 
							2, 2, 2, 1, 2, 2, 2, 1, 2, 1, 
							2, 1, 1, 1, 2, 2, 1, 2, 1, 1, 
							1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 
							1, 2, 2, 2, 1, 1, 2, 1, 1, 2, 
							2, 1, 1, 1, 2, 1, 2, 2, 1, 2, 
							2, 1, 1, 1, 2, 2, 1, 2, 1, 1, 
							1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 
							1, 2, 1, 1, 1, 2, 2, 1, 2, 2" xSpacing="5.0" zSpacing="5.0" solid="false">
					</ElevationGrid>
					<Appearance sorttype="auto" alphaclipthreshold="0.1">
						<ImageTexture url='123.jpg'></ImageTexture>
						<Material shininess='1'>
						</Material>
						<TextureTransform scale="1 1">
						</texturetransform>
					</Appearance>
				</Shape>
			</Transform>
			<Transform id="bird" DEF="bird" scale="4 4 4" translation="-3 6 -3" rotation='0 1 0 2.8'>
			<Inline url="bird.x3d"></Inline>
			</Transform>

				<TimeSensor id="time" DEF="time" cycleInterval="5" loop="true" enabled="true"></TimeSensor>
				<PositionInterpolator DEF="move" key="0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1" keyValue="-3 6 -3, -4 6 0, -3 6 3, 0 6 4, 3 6 3, 4 6 0, 3 6 -3, 0 6 -4, -3 6 -3"></PositionInterpolator>
                <PositionChaser DEF="PosCh" duration="4"></PositionChaser>
				<ROUTE fromNode="time" fromField="fraction_changed" 
				toNode="move" toField="set_fraction"></ROUTE>
				<ROUTE fromNode="move" fromField="value_changed" 
				toNode="PosCh" toField="set_destination"></ROUTE>
                <ROUTE fromNode="PosCh" fromField="value_changed" 
				toNode="bird" toField="translation"></ROUTE>
				
				<OrientationInterpolator DEF="OrientInt" key="0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1" keyValue="0 1 0 2.8, 0 1 0 3.4, 0 1 0 4, 0 1 0 4.6, 0 1 0 -0.6, 0 1 0 0, 0 1 0 0.8, 0 1 0 1.6, 0 1 0 2.8"></OrientationInterpolator>
				<OrientationChaser DEF="PosCh2" duration="4"></OrientationChaser>
				<ROUTE fromNode="time" fromField="fraction_changed" 
				toNode="OrientInt" toField="set_fraction"></ROUTE>
				<ROUTE fromNode="OrientInt" fromField="value_changed" 
				toNode="PosCh2" toField="set_destination"></ROUTE>
				<ROUTE fromNode="PosCh2" fromField="value_changed" 
				toNode="bird" toField="set_rotation"></ROUTE>

				<TimeSensor id="time2" DEF="time2" cycleInterval="5" loop="true" enabled="true"></TimeSensor>
				<PositionInterpolator DEF="move" key="0 0.5 1" keyValue="1 1.4 0, 1 0.9 4, 1 1.4 0"></PositionInterpolator>
                <PositionDamper DEF="PosCh3" tau="1"></PositionDamper>
				<ROUTE fromNode="time2" fromField="fraction_changed" 
				toNode="move" toField="set_fraction"></ROUTE>
				<ROUTE fromNode="move" fromField="value_changed" 
				toNode="PosCh3" toField="set_destination"></ROUTE>
                <ROUTE fromNode="PosCh3" fromField="value_changed" 
				toNode="plot" toField="translation"></ROUTE>
				
				<OrientationInterpolator DEF="OrientInt" key="0 0.5 1" keyValue="1 0 0 0.18, 1 0 0 -0.2, 1 0 0 0.18"></OrientationInterpolator>
				<OrientationDamper DEF="PosCh4" tau="1"></OrientationDamper>
				<ROUTE fromNode="time2" fromField="fraction_changed" 
				toNode="OrientInt" toField="set_fraction"></ROUTE>
				<ROUTE fromNode="OrientInt" fromField="value_changed" 
				toNode="PosCh4" toField="set_destination"></ROUTE>
				<ROUTE fromNode="PosCh4" fromField="value_changed" 
				toNode="plot" toField="set_rotation"></ROUTE>
		</scene>
	</x3d>
</body>
</html>